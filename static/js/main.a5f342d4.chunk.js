(this.webpackJsonpprontoforms=this.webpackJsonpprontoforms||[]).push([[0],{24:function(e,t,n){e.exports=n.p+"static/media/DoubleRing-1s-610px.992b605e.gif"},29:function(e,t,n){e.exports=n(55)},34:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(2),i=n.n(r),s=(n(34),n(19)),c=n(20),l=n(26),u=n(21),m=n(3),d=n(27),g=n(22),f=n(4);function p(){var e=Object(g.a)(['\n  body {\n    margin: 0;\n    padding: 0;\n    background-color: #E7E7E7;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n      "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    color: #333;\n  }\n  .pointer {\n    cursor: pointer;\n  }  \n  .headerBg {\n    background-color: #0076A8;\n  }\n  .sideBarBkg {\n    background-color: #2C3F50;\n  }\n  .mainBkg {\n    background-color: #E7E7E7;\n  }\n  .HighAvail {\n    color: #388697;\n  }\n  .LowAvail {\n    color: #CC2936;\n  }\n  .shadow {\n    box-shadow: 0 .5rem 1rem #aaa !important;\n  }  \n  .col-1 {\n    padding-right: 0!important;\n  }\n  div:focus, .selectedFlag {\n    background-color: #f26522;\n  }  \n']);return p=function(){return e},e}var h=Object(f.b)(p()),k=n(25),y=function(e){if(!e.networks||0===e.networks.length)return null;var t=e.networks.filter((function(e){return parseFloat(e.location.longitude)<=50})),n=Object(k.a)(new Set(t.map((function(e){return e.location.country}))));return n.sort(),console.log(e),o.a.createElement(o.a.Fragment,null,n.map((function(t,n){return o.a.createElement("div",{tabIndex:n,key:t+"-"+n,className:"pointer".concat(e.selected.toUpperCase()===t?" selectedFlag":"")},o.a.createElement("img",{src:"https://www.countryflags.io/"+t.toLowerCase()+"/shiny/64.png",alt:"Country Flag "+t,className:"img pointer flag",onClick:function(){return e.mapClick(t.toLowerCase())}}))})))},w=n(5),b=n.n(w),E=function(){return"https://api.citybik.es/v2/networks"},v=function(e){return"https://api.citybik.es/v2/networks/"+e},C=function(e){return o.a.createElement(o.a.Fragment,null,e.firstLoad&&"Please select a Country from the left.",e.cnetworks&&e.cnetworks.map((function(e,t){var n=e.network.stations.reduce((function(e,t){var n=t.free_bikes,a=t.empty_slots;return{free_bikes:e.free_bikes+(n||0),empty_slots:e.empty_slots+(a||0)}}),{free_bikes:0,empty_slots:0}),a=Math.round(n.free_bikes/(n.free_bikes+n.empty_slots)*100)||0;return o.a.createElement("div",{className:"card mb-3 shadow",key:t},o.a.createElement("div",{className:"card-body"},o.a.createElement("h1",{className:"display-4 text-center"},e.network.location.city?e.network.location.city:"N/A"),o.a.createElement("p",{className:"text-center"},"Availability:\xa0",o.a.createElement("span",{className:"h3 pl-3 ".concat(0===a?"LowAvail":"HighAvail")},a,"%")),o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("u",null,"Companies:")," ",n.free_bikes," bikes / ",n.free_bikes+n.empty_slots," spots"),o.a.createElement("p",null,e.network.company.join("*").split("*").map((function(e){return o.a.createElement("span",{key:e.replace(/[^\w\s]/gi,"")},e,o.a.createElement("br",null))}))))))})))},F=function(e){return e&&0!==e.length?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"selected-flag-container"},o.a.createElement("img",{src:"https://www.countryflags.io/"+e.flag+"/shiny/64.png",alt:"Country Flag "+e.flag,className:"img"}))):null},N=n(24),L=n.n(N),S=function(){return o.a.createElement("div",null,o.a.createElement("img",{src:L.a,style:{width:"400px",margin:"auto",display:"block"},alt:"Loading..."}))},_={colors:{"$light-bg":"#FFF","$dark-bg":"#E7E7E7",$header:"#0076A8",$sidebar:"#2C3F50",$hover:"#678678",$dropshadow:"#AAA","$text-color":"#333","$high-availability":"#388697","$low-availability":"#CC2936"}},x=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleMapClick=function(e){n.setState({selectedCountry:e,isFirstLoad:!1,isLoading:!0}),n.fetchStations();for(var t=n.state.networks.filter((function(t){return t.location.country===e.toUpperCase()})).sort((function(e,t){return e.location.city.localeCompare(t.location.city)})),a=[],o=0;o<t.length;o++)if(t[o]){var r=v(t[o].id);a.push(b.a.get(r).then((function(e){return new Promise((function(t){return t(e.data)}))})))}Promise.all(a).then((function(e){n.setState({countryNetworks:n.state.countryNetworks.concat.apply([],e),isLoading:!1})}))},n.state={isLoading:!1,networks:[],selectedCountry:"",isFirstLoad:!0,countryNetworks:[]},n.handleMapClick=n.handleMapClick.bind(Object(m.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"fetchStations",value:function(){var e=this;this.setState({loading:!0},(function(){b.a.get(v(),{}).then((function(t){e.setState({networks:t.data.networks,isLoading:!1})})).catch((function(t){return e.setState({error:t,isLoading:!1})}))}))}},{key:"componentDidMount",value:function(){this.fetchNetworks()}},{key:"fetchNetworks",value:function(){var e=this;this.setState({isLoading:!0},(function(){b.a.get(E(),{}).then((function(t){e.setState({networks:t.data.networks,isLoading:!1})})).catch((function(t){return e.setState({error:t,isLoading:!1})}))}))}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement(S,null)):o.a.createElement(f.a,{theme:_},o.a.createElement(o.a.Fragment,null,o.a.createElement(h,null),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 m-0 p-0 headerBg sticky-top"},o.a.createElement(o.a.Fragment,null,this.state.selectedCountry?o.a.createElement(F,{flag:this.state.selectedCountry}):"")),o.a.createElement("div",{className:"col-1 text-center sideBarBkg",id:"flags"},o.a.createElement(y,{networks:this.state.networks,mapClick:this.handleMapClick,selected:this.state.selectedCountry})),o.a.createElement("div",{className:"main col-8 h-100 py-3 mainBkg mx-auto",id:"main"},o.a.createElement(C,{cnetworks:this.state.countryNetworks,firstLoad:this.state.isFirstLoad})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.a5f342d4.chunk.js.map