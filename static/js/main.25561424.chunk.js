(this.webpackJsonpprontoforms=this.webpackJsonpprontoforms||[]).push([[0],{17:function(t,e,n){t.exports=n.p+"static/media/loading.d377e76e.gif"},21:function(t,e,n){t.exports=n(44)},26:function(t,e,n){},44:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(13),i=n.n(r),s=(n(26),n(14)),c=n(15),l=n(19),u=n(16),m=n(2),d=n(20),f=n(17),h=n.n(f),g=n(18),w=function(t){if(!t.networks||0===t.networks.length)return null;var e=t.networks.filter((function(t){return parseFloat(t.location.longitude)<=50})),n=Object(g.a)(new Set(e.map((function(t){return t.location.country}))));return n.sort(),o.a.createElement(o.a.Fragment,null,n.map((function(e,n){return o.a.createElement("div",{key:e+"-"+n},o.a.createElement("img",{src:"https://www.countryflags.io/"+e.toLowerCase()+"/shiny/64.png",alt:"Country Flag "+e,className:"img pointer flag",onClick:function(){return t.mapClick(e.toLowerCase())}}))})))},k=n(3),p=n.n(k),y=function(){return"https://api.citybik.es/v2/networks"},v=function(t){return"http://api.citybik.es/v2/networks/?fields=stations"+t},E=function(t){return console.log(t.networks),o.a.createElement(o.a.Fragment,null,t.firstLoad&&"Please select a Country from the left.",t.networks.map((function(t,e){return o.a.createElement("div",{className:"card",key:t+"-"+e},o.a.createElement("div",{className:"card-body"},o.a.createElement("h1",{className:"display-4 text-center"},t.location.city),o.a.createElement("p",null,"Availability: "),o.a.createElement("div",null,t.name)))})))},C=function(t){return t&&0!==t.length?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"selected-flag-container"},o.a.createElement("img",{src:"https://www.countryflags.io/"+t.flag+"/shiny/64.png",alt:"Country Flag "+t.flag,className:"img"}))):null},L=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleMapClick=function(t){for(var e=n.state.networks.filter((function(e){return e.location.country===t.toUpperCase()})).sort((function(t,e){return t.location.city.localeCompare(e.location.city)})),a=[],o=0;o<e.length;o++)if(e[o].id){var r=v(e[o].id);console.log(e[o].id),a.push(p.a.get(r).then((function(t){return new Promise((function(e){return e(t.data)}))})))}Promise.all(a).then((function(t){console.log("res: ",t)})),n.fetchCountryData(),n.setState({selectedCountry:t,countryNetworks:e,isFirstLoad:!1})},n.state={isLoading:!0,networks:[],selectedCountry:null,isFirstLoad:!0,countryNetworks:[]},n.handleMapClick=n.handleMapClick.bind(Object(m.a)(n)),n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"fetchCountryData",value:function(){var t=this;p.a.get(v(),{}).then((function(e){t.setState({networks:e.data.networks,isLoading:!1})})).catch((function(e){return t.setState({error:e,isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.setState({isLoading:!0}),this.fetchNetworks()}},{key:"fetchNetworks",value:function(){var t=this;p.a.get(y(),{}).then((function(e){t.setState({networks:e.data.networks,isLoading:!1})})).catch((function(e){return t.setState({error:e,isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?o.a.createElement("img",{className:"loading-img",src:h.a,alt:"Loading..."}):o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 bg-primary",id:"selectedFlag"},this.state.selectedCountry?o.a.createElement(C,{flag:this.state.selectedCountry}):""),o.a.createElement("div",{className:"col-1 text-center",id:"flags"},o.a.createElement(w,{networks:this.state.networks,mapClick:this.handleMapClick,isFirstLoad:this.state.isFirstLoad})),o.a.createElement("div",{className:"main col-8 bg-warning h-100 py-3",id:"main"},o.a.createElement(E,{networks:this.state.countryNetworks,firstLoad:this.state.isFirstLoad})))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.25561424.chunk.js.map